# Car Giveaway Web Application

## Описание

Это веб-приложение для проведения розыгрыша автомобиля Porsche Cayenne. Основные функции:
- Регистрация участников
- Проверка местоположения (ограничение для жителей Махачкалы и Каспийска)
- Административная панель для управления участниками
- Экспорт списка участников в Excel

## Технические требования

- Python 3.7+
- Flask
- Requests
- XlsxWriter
- Другие зависимости указаны в requirements.txt

## Установка и запуск локально

1. Клонируйте репозиторий:
```
git clone https://github.com/yourusername/car_giveaway.git
cd car_giveaway
```

2. Создайте виртуальное окружение и установите зависимости:
```
python -m venv venv
source venv/bin/activate  # На Windows: venv\Scripts\activate
pip install -r requirements.txt
```

3. Запустите приложение:
```
python run.py
```

Приложение будет доступно по адресу: http://localhost:5000

## Деплой на GitHub и Render

Для автоматического деплоя проекта на GitHub и Render выполните следующие шаги:

1. Установите необходимые зависимости:
```
pip install PyGithub requests
```

2. Запустите скрипт деплоя:
```
python deploy.py
```

3. Следуйте инструкциям в скрипте:
   - Введите ваше имя пользователя GitHub
   - Введите личный токен доступа GitHub (с правами на создание репозиториев)
   - Введите имя репозитория
   - Введите путь к папке с проектом
   - Введите API ключ Render.com

## Панель администратора

Для доступа к панели администратора:
1. Перейдите по адресу: `/admin` (например, `https://your-app.render.com/admin`)
2. Введите пароль: `kvdarit_avto35` 

**ВАЖНО:** Храните этот пароль в безопасном месте и не публикуйте его в открытом доступе.

## Переменные окружения

Приложение поддерживает следующие переменные окружения:

- `SECRET_KEY` - ключ для шифрования сессий
- `ALLOW_ALL_LOCATIONS` - если установлено в `true`, отключает ограничение по местоположению
- `DATA_FILE` - полный путь к файлу с данными участников
- `DATA_DIR` - директория для хранения файлов данных

## Оптимизация для высоких нагрузок

Приложение оптимизировано для работы с высокими нагрузками:
- Используется многопоточный режим работы с Gunicorn
- Применено кэширование статических файлов на стороне клиента
- Реализовано кэширование результатов API-запросов
- Добавлена защита от конкурентного доступа к файлам данных

## Лицензия

MIT 